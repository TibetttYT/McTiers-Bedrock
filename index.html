<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TTB â€“ Tier Testing Bedrock</title>
<style>
body { margin:0; font-family:'Inter',sans-serif; background:rgba(0,50,0,0.7); color:#e5e7eb; }
header { padding:20px; text-align:center; background:#020617; border-bottom:1px solid #1e293b; }
header h1 { margin:0; font-size:28px; }
header p { margin:4px 0 0; color:#94a3b8; }
nav { display:flex; flex-wrap:wrap; justify-content:center; gap:8px; padding:10px 0; background:#111827; }
nav button { background:#1e293b; border:none; color:#e5e7eb; padding:6px 12px; border-radius:6px; cursor:pointer; transition:0.2s; }
nav button:hover { background:#2563eb; }
nav button.active { background:#2563eb; }
.tiers { display:grid; grid-template-columns: repeat(auto-fit, minmax(140px,1fr)); gap:10px; padding:20px; max-width:1200px; margin:auto; }
.tier { border-radius:10px; padding:12px; box-shadow:0 6px 18px rgba(0,0,0,.3); transition:0.2s; }
.tier:hover { transform:translateY(-3px); }
.tier h2 { margin:0 0 6px; font-size:16px; }
.player { border-radius:6px; padding:4px 6px; margin:4px 0; cursor:grab; transition:0.2s; background:#1e293b; }
.player.dragging { opacity:0.5; }
.admin-link { position:fixed; bottom:10px; right:10px; font-size:12px; opacity:.4; color:#94a3b8; text-decoration:none; }
.admin-panel { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#020617; border:1px solid #334155; padding:20px; border-radius:10px; max-width:400px; width:90%; box-shadow:0 10px 40px rgba(0,0,0,.5); display:none; z-index:1000; }
.admin-panel h2 { margin-top:0; }
.admin-panel button { background:#2563eb; border:none; color:white; padding:6px 12px; border-radius:6px; cursor:pointer; margin-top:10px; }
.overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.6); display:none; z-index:999; }
</style>
</head>
<body>
<header>
<h1>TTB</h1>
<p>Tier Testing Bedrock</p>
</header>
<nav id="menu">
<button data-tab="Sword" class="active">Sword</button>
<button data-tab="UHC">UHC</button>
<button data-tab="Crystal">Crystal</button>
<button data-tab="Spear">Spear</button>
<button data-tab="Axe">Axe</button>
<button data-tab="DiamondPot">Diamond Pot</button>
<button data-tab="NetheritePot">Netherite Pot</button>
<button data-tab="Mace">Mace</button>
<button data-tab="SMP">SMP</button>
<button data-tab="Leaderboard">Leaderboard</button>
</nav>
<section class="tiers" id="tiers"></section>
<a class="admin-link" href="#" id="adminBtn">admin</a>
<div class="overlay" id="overlay"></div>
<div class="admin-panel" id="adminPanel">
<h2>Admin Panel</h2>
<p>Drag & drop players to configure tiers (double-click to rename)</p>
<div id="adminContent"></div>
<button id="saveBtn">Save</button>
</div>
<script>
const gamemodes = ["Sword","UHC","Crystal","Spear","Axe","DiamondPot","NetheritePot","Mace","SMP","Leaderboard"];
const defaultTiers = ["HT1","HT2","LT1","LT2"];
const defaultData = {};
gamemodes.forEach(mode=>{
  defaultData[mode]={};
  defaultTiers.forEach(tier=>{
    defaultData[mode][tier]=[tier+"Player1",tier+"Player2"];
  });
});
let data = JSON.parse(localStorage.getItem('tiers')) || defaultData;
let activeTab = "Sword";
const tiersContainer = document.getElementById('tiers');
const tierColors = {"HT1":"gold","HT2":"limegreen","LT1":"deepskyblue","LT2":"violet"};

function render(){
  tiersContainer.innerHTML='';
  const tabData = data[activeTab];
  for(const tier in tabData){
    const div=document.createElement('div');
    div.className='tier';
    div.dataset.tier=tier;
    div.style.background=tierColors[tier] || '#020617';
    div.innerHTML=`<h2>${tier}</h2>`;
    tabData[tier].forEach(player=>{
      const pDiv=document.createElement('div');
      pDiv.className='player';
      pDiv.draggable=true;
      pDiv.textContent=player;
      // Spieler umbenennen per Doppelklick
      pDiv.addEventListener('dblclick',()=>{const n=prompt("Enter new player name:",pDiv.textContent);if(n)pDiv.textContent=n;});
      div.appendChild(pDiv);
    });
    tiersContainer.appendChild(div);
  }
  addDragDrop();
}

function addDragDrop(){
  let dragged;
  document.querySelectorAll('.player').forEach(p=>{
    p.addEventListener('dragstart',()=>{dragged=p;p.classList.add('dragging');});
    p.addEventListener('dragend',()=>{dragged.classList.remove('dragging');dragged=null;});
  });
  document.querySelectorAll('.tier').forEach(td=>{
    td.addEventListener('dragover',e=>e.preventDefault());
    td.addEventListener('drop',e=>{if(dragged){td.appendChild(dragged);saveData();}});
  });
}

function saveData(){
  const newData={};
  document.querySelectorAll('.tier').forEach(td=>{
    newData[td.dataset.tier]=Array.from(td.querySelectorAll('.player')).map(p=>p.textContent);
  });
  data[activeTab]=newData;
  localStorage.setItem('tiers',JSON.stringify(data));
}

const adminBtn=document.getElementById('adminBtn');
const adminPanel=document.getElementById('adminPanel');
const overlay=document.getElementById('overlay');
const saveBtn=document.getElementById('saveBtn');

adminBtn.addEventListener('click',()=>{
  const pw=prompt('Admin password');
  if(pw==='Tibetititi'){adminPanel.style.display='block';overlay.style.display='block';renderAdminPanel();}
  else{alert('Wrong password');}
});
overlay.addEventListener('click',()=>{adminPanel.style.display='none';overlay.style.display='none';});

function renderAdminPanel(){
  const content=document.getElementById('adminContent');
  content.innerHTML='';
  const tabData = data[activeTab];
  for(const tier in tabData){
    const div=document.createElement('div');
    div.className='tier';
    div.dataset.tier=tier;
    div.style.background=tierColors[tier] || '#020617';
    div.innerHTML=`<h2>${tier}</h2>`;
    tabData[tier].forEach(player=>{
      const pDiv=document.createElement('div');
      pDiv.className='player';
      pDiv.draggable=true;
      pDiv.textContent=player;
      pDiv.addEventListener('dblclick',()=>{const n=prompt("Enter new player name:",pDiv.textContent);if(n)pDiv.textContent=n;});
      div.appendChild(pDiv);
    });
    content.appendChild(div);
  }
  addDragDrop();
}

saveBtn.addEventListener('click',()=>{
  saveData();
  alert('Saved!');
  adminPanel.style.display='none';
  overlay.style.display='none';
  render();
});

document.querySelectorAll('#menu button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('#menu button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    activeTab = btn.dataset.tab;
    render();
  });
});

render();
</script>
</body>
</html>
